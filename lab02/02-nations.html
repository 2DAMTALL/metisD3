<!DOCTYPE html>
<head>
	<script src="https://d3js.org/d3.v4.min.js"></script>

	<style>
    	body { 
    		margin: 0;
    		position: fixed;
    		top: 0;
    		right: 0;
    		bottom: 0;
    		left: 0;
		}

		.title {
			font-family: "Georgia";
			font-size: 32px;
			fill: #000;
		}

		.axis {
			font-family: "Arial";
			font-size: 11px;
			fill: #808080;
		}

		.bar {
			fill: pink;
			fill-opacity: 1;
		}
	</style>
</head>
<body>
	<script>
		/*	Input: nations.json
			Output: 	x-axis = income
						y-axis = lifeExpectancy
						radius = population
						color  = region

			Bonus: use the raw data from class 3 and create the final dataset yourself. Add axes and labels.
			For extra practice: visualize the barley yield data.
		*/

		var getAttrByYear = function(input, output, year, attr) {
			input[attr].forEach(function(d) { 
				if (d[0] === year) { 
					return output[attr] = d[1];
				}
			});
		};
		
		d3.json("nations.json", function(error, data) {
			var temp = [];
			if (error) return error;
			console.log(data);		// original data

			// data
			var filterByYear = function(year) {
				data.forEach(function(i) {
					var country = {
						year: null,
						country: null,
						region: null,
						income: null,
						lifeExpectancy: null,
						population: null
					}

					getIncome = getAttrByYear(i, country, year, "income");
					getLifeExpectancy = getAttrByYear(i, country, year, "lifeExpectancy");
					getPopulation = getAttrByYear(i, country, year, "population");
					country.country = i.name;
					country.region = i.region;
					country.year = year;
					temp.push(country);
				});
				console.log(temp);	// filtered data
			};
			filterByYear(1989);
		});

			// ------------------------------------------------------------
			// min-max
				// income
				// lifeExpectancy

			// scales
				// xScale : income
				// yScale : lifeExpectancy

			// axes
	</script>
</body>
</html>